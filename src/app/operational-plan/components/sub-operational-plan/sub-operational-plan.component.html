<div class="kx-row" *ngIf="planDetails">
    <div class="kx-col kx-col--4 kx-pr--small">
        <app-dynamic-form [formValues]="formValues" [config]="config" [formReset]="formReset" (formSubmitted)="formSubmitted($event)">
        </app-dynamic-form>
    </div>
    <div class="kx-col kx-col--8">
        <div class="kx-card kx-card--skin-default">
            <div class="kx-p--medium">
                <div class="kx-row">
                    <div class="kx-col">
                        <div><strong>Vessel : </strong></div>
                        <div>{{planDetails.VesselName}}</div>
                    </div>
                    <div class="kx-col">
                        <div><strong>IMO : </strong></div>
                        <div>{{planDetails.ImoNumber}}</div>
                    </div>
                    <div class="kx-col">
                        <div><strong>Operation Time : </strong></div>
                        <div>{{planDetails.OperationDate | date:'dd/MM/yyyy HH:mm'}} ({{planDetails.LocalTimeZone}})
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="kx-card kx-card--skin-default  kx-mt--small">
            <div class="kx-p--medium">
                <app-load *ngIf="isDataLoading"></app-load>
                <p-table *ngIf="!isDataLoading && planDetails.SubOperationPlans.length > 0" #tt [value]="planDetails.SubOperationPlans" [columns]="subOperationCols"
                    tableStyleClass="kx-table kx-table--outer-border" autoLayout="true">
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" class="kx-p--xlarge">
                                {{col.header}}
                            </th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <tr>
                            <td *ngFor="let col of columns">
                                <div [ngSwitch]="col.field">
                                    <div *ngSwitchCase="'SubOperationStartTime'">
                                        {{rowData[col.field] | date:'dd/MM/yyyy HH:mm'}}
                                    </div>
                                    <div *ngSwitchCase="'SubOperationEndTime'">
                                        {{rowData[col.field] | date:'dd/MM/yyyy HH:mm'}}
                                    </div>
                                    <div *ngSwitchCase="'Action'">
                                        <button [disabled]="rowData.Status !== 'New'"
                                            class="kx-btn kx-btn--skin-secondary kx-btn--size-tiny kx-btn--icon"
                                            aria-label="Edit Sub Operational Plan" title="Edit Sub Operational Plan"
                                            (click)="editData(rowData)">
                                            <span class="kx-btn__inner">
                                                <i class="kx-icon kx-icon--size-moderate">
                                                    <svg focusable="false">
                                                        <use href="./assets/img/icons/sprites/icons.svg#pencil">
                                                        </use>
                                                    </svg>
                                                </i>
                                                <span class="kx-btn__txt kx-is-vishidden">Edit Sub Operational
                                                    Plan</span>
                                            </span>
                                        </button>
                                        <button [disabled]="rowData.Status !== 'New'"
                                            class="kx-btn kx-btn--skin-secondary kx-btn--size-tiny kx-btn--icon"
                                            aria-label="Complete Sub Operational Plan"
                                            title="Complete Sub Operational Plan"
                                            (click)="completeSubOperation(rowData)">
                                            <span class="kx-btn__inner">
                                                <i class="kx-icon kx-icon--size-moderate">
                                                    <svg focusable="false">
                                                        <use href="./assets/img/icons/sprites/icons.svg#check">
                                                        </use>
                                                    </svg>
                                                </i>
                                                <span class="kx-btn__txt kx-is-vishidden">Complete Sub Operational
                                                    Plan</span>
                                            </span>
                                        </button>
                                    </div>
                                    <div *ngSwitchDefault>{{rowData[col.field]}}</div>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
                <app-no-data [displayme]="!isDataLoading && planDetails.SubOperationPlans.length === 0"></app-no-data>
            </div>
        </div>
    </div>
</div>